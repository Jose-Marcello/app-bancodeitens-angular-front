<!-- src/app/disciplinas/cadastro-disciplinas/cadastro-disciplinas.component.html -->

<div class="flex flex-col gap-6">
  <!-- Cabe√ßalho e Bot√£o Voltar -->
  <header class="flex justify-between items-center pb-4 border-b border-gray-200">
    <!-- Usa a vari√°vel do TS para o t√≠tulo (Nova Disciplina / Editar Disciplina) -->
    <h1 class="text-3xl font-semibold text-gray-800">{{ pageTitle }}</h1> 
    <button mat-flat-button (click)="voltar()">
      <mat-icon>arrow_back</mat-icon>
      Voltar para Lista
    </button>
  </header>

  <!-- Indicador de Carregamento para o modo Edi√ß√£o (Carregando dados) -->
  <div *ngIf="isLoading() && isEditMode" class="text-center p-6 text-gray-500">
    <span class="animate-spin text-4xl">‚öôÔ∏è</span>
    <p class="mt-2">Carregando dados para edi√ß√£o...</p>
  </div>
  
  <!-- üí• IN√çCIO DA ESTRUTURA DO FORMUL√ÅRIO COMPLETO -->
  <mat-card class="shadow-lg" *ngIf="!isLoading() || !isEditMode">
    <mat-card-content class="p-4">
      
      <!-- üü¢ 1. TAG DO FORMUL√ÅRIO COM O FORM GROUP -->
      <form [formGroup]="disciplinaForm" (ngSubmit)="onSubmit()" class="flex flex-col gap-4">

        <!-- üü¢ 2. CAMPO NOME (OBRIGAT√ìRIO) -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Nome da Disciplina</mat-label>
          <input matInput formControlName="nome" placeholder="Ex: Matem√°tica">
          <mat-icon matSuffix>book</mat-icon>
          <!-- Mensagens de Valida√ß√£o -->
          <mat-error *ngIf="disciplinaForm.get('nome')?.hasError('required')">
            O nome da disciplina √© **obrigat√≥rio**.
          </mat-error>
          <mat-error *ngIf="disciplinaForm.get('nome')?.hasError('minlength')">
            O nome deve ter no m√≠nimo 3 caracteres.
          </mat-error>
        </mat-form-field>
      

        <!-- üü¢ 5. RODAP√â E BOT√ÉO (O c√≥digo que voc√™ me enviou) -->
        <div class="flex justify-end pt-4 border-t border-gray-100 mt-4">
          <button 
            mat-flat-button 
            color="primary" 
            type="submit" 
            [disabled]="disciplinaForm.invalid || isLoading()"
            class="min-w-32"
          >
            <span *ngIf="isLoading()" class="animate-spin mr-2">‚öôÔ∏è</span>
            {{ isLoading() ? 'Salvando...' : (isEditMode ? 'Salvar Altera√ß√µes' : 'Criar Disciplina') }}
          </button>
        </div>

      </form>

    </mat-card-content>
  </mat-card>
</div>